<!DOCTYPE html>
<html>
<head>
    <title>Root Path Wallet Test</title>
    <style>
        body { font-family: Arial; margin: 20px; }
        .result { margin: 10px 0; padding: 10px; background: #f0f0f0; }
        .success { color: green; }
        .failure { color: red; }
    </style>
</head>
<body>
    <h1>Root Path Wallet Test</h1>
    <div class="result" id="result">Checking wallet...</div>
    <button onclick="checkWallet()">Check Wallet</button>
    <button onclick="connectWallet()">Connect Wallet</button>
    
    <script>
        // Check wallet immediately and after a delay
        checkWallet();
        setTimeout(checkWallet, 1000);
        
        function checkWallet() {
            const result = document.getElementById('result');
            result.innerHTML = '<h3>Wallet Status:</h3>';
            
            if (window.partisiawallet) {
                result.innerHTML += '<p class="success">✅ window.partisiawallet is available!</p>';
            } else {
                result.innerHTML += '<p class="failure">❌ window.partisiawallet is not available</p>';
            }
            
            if (window.ethereum) {
                result.innerHTML += '<p class="success">✅ window.ethereum is available!</p>';
                
                if (window.ethereum.isPartisia) {
                    result.innerHTML += '<p class="success">✅ window.ethereum.isPartisia is true!</p>';
                } else {
                    result.innerHTML += '<p class="failure">❌ window.ethereum.isPartisia is false or undefined</p>';
                }
            } else {
                result.innerHTML += '<p class="failure">❌ window.ethereum is not available</p>';
            }
            
            result.innerHTML += '<p>Current path: ' + window.location.pathname + '</p>';
            result.innerHTML += '<p>Check time: ' + new Date().toLocaleTimeString() + '</p>';
        }
        
        async function connectWallet() {
            const result = document.getElementById('result');
            
            if (!window.partisiawallet) {
                result.innerHTML += '<p class="failure">❌ Cannot connect - wallet not available</p>';
                return;
            }
            
            try {
                result.innerHTML += '<p>Attempting to connect...</p>';
                
                await window.partisiawallet.connect({
                    name: 'PartiVotes',
                    description: 'Decentralized voting application on Partisia Blockchain',
                    url: window.location.origin
                });
                
                result.innerHTML += '<p class="success">✅ Successfully connected!</p>';
                
                // Try to get the address
                const address = await window.partisiawallet.getAddress();
                result.innerHTML += '<p class="success">✅ Wallet address: ' + address + '</p>';
            } catch (error) {
                result.innerHTML += '<p class="failure">❌ Connection error: ' + error.message + '</p>';
            }
        }
    </script>
</body>
</html>
